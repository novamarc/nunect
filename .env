# nunect Environment Configuration
# Copy to .env and customize for your deployment

# =============================================================================
# NATS Server Configuration
# =============================================================================

# Client port (NATS native protocol)
NATS_PORT=4222

# HTTP monitoring port (internal only, behind proxy)
NATS_HTTP_PORT=8222

# HTTPS monitoring port (TLS enabled)
NATS_HTTPS_PORT=8444

# WebSocket port (WSS - TLS enabled)
NATS_WS_PORT=8443

# WebSocket domain (separate from UI domain)
NATS_WS_DOMAIN=wss.nunet.one

# TLS certificates (system-managed - REQUIRED)
NATS_TLS_CERT=/home/caia/192.168.178.40+2.pem
NATS_TLS_KEY=/home/caia/192.168.178.40+2-key.pem

# Server name (appears in logs and stats)
NATS_SERVER_NAME=nunect-dev

# Data directory for JetStream persistence
NATS_DATA_DIR=./data/nats

# JetStream memory limit
NATS_JS_MAX_MEMORY=1GB

# JetStream disk limit  
NATS_JS_MAX_FILE=10GB

# Enable debug logging (true/false)
NATS_DEBUG=false

# Enable trace logging (very verbose, true/false)
NATS_TRACE=false

# =============================================================================
# Time Synchronization (PTP + NTP/Chrony)
# =============================================================================

# PTP Master address (Grandmaster clock - typically the core server)
PTP_MASTER_ADDRESS=

# PTP Domain (0-127, default 0)
PTP_DOMAIN=0

# PTP Network interface (eth0, enp0s1, etc.)
PTP_INTERFACE=eth0

# NTP/Chrony fallback servers (comma-separated)
NTP_SERVERS=pool.ntp.org,time.google.com,time.cloudflare.com

# Time sync priority: ptp, chrony, auto
# ptp = PTP only, fail if unavailable
# chrony = NTP/Chrony only
# auto = PTP preferred, fallback to chrony
TIME_SYNC_MODE=auto

# Enable PTP hardware timestamping (requires compatible NIC)
PTP_HW_TIMESTAMP=true

# Publish timing metrics interval (seconds)
TIME_METRICS_INTERVAL=5

# =============================================================================
# Accounts and Authentication (Development Only)
# =============================================================================

# System account credentials (for monitoring)
NATS_SYS_USER=admin
NATS_SYS_PASSWORD=changeit

# Default tenant account
NATS_DEFAULT_ACCOUNT=bridge
NATS_DEFAULT_USER=client
NATS_DEFAULT_PASSWORD=secret

# =============================================================================
# Dashboard / UI Configuration
# =============================================================================

# Dashboard server
NATS_MANAGER_PORT=4280
NATS_MANAGER_TITLE="nunect Manager"

# Domain to serve dashboard (for virtual host/proxy setups)
NATS_MANAGER_DOMAIN=nats.nunet.one

# CORS allowed origins (comma-separated)
# Use * for development, specific domains for production
NATS_MANAGER_CORS_ORIGINS=https://nats.nunet.one,https://wss.nunet.one

# Bind address (0.0.0.0 for all interfaces, 127.0.0.1 for localhost only)
NATS_MANAGER_BIND=0.0.0.0

# SSL/TLS Configuration (optional - auto-generates self-signed if not set)
NATS_MANAGER_SSL_CERT=/home/caia/nunet.one.fullchain.crt
NATS_MANAGER_SSL_KEY=/home/caia/nunet.one.key

# Generic Client defaults
# Use wss:// for secure WebSocket connections
CLIENT_DEFAULT_URL=https://wss.nunet.one
CLIENT_RECONNECT_WAIT=2000
CLIENT_MAX_RECONNECTS=10

# =============================================================================
# Logging
# =============================================================================

# Log level: DEBUG, INFO, WARN, ERROR
LOG_LEVEL=INFO

# Log directory
LOG_DIR=./logs

# Enable file logging
LOG_TO_FILE=true

# Enable console logging
LOG_TO_CONSOLE=true
