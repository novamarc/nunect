# Generated by nats-server.sh at Thu Feb 12 10:29:59 PM UTC 2026
# DO NOT EDIT - This file is regenerated on each start

# nunect NATS Server Configuration
# This file is read by scripts/nats-server.sh
# Environment variables from .env are substituted at startup

# =============================================================================
# Network
# =============================================================================
port: 4222
server_name: nunect-dev

# HTTP monitoring (disabled - use HTTPS below)
# http_port: 8222

# =============================================================================
# Logging
# =============================================================================
debug: false
trace: false

# =============================================================================
# Limits
# =============================================================================
max_connections: 65536
max_payload: 8MB
max_pending: 64MB
write_deadline: 10s

# =============================================================================
# Accounts
# =============================================================================
accounts {
  # System account for monitoring and management
  SYS: {
    users: [
      {user: admin, password: changeit}
    ]
  }
  
  # Bridge tenant account (voice/data bridging)
  BRIDGE: {
    jetstream: enabled
    users: [
      {
        user: client
        password: secret
        permissions: {
          publish: {
            allow: ["com.bridge.>", "nav.bridge.>", "ops.heartbeat.*", "ops.log.>"]
          }
          subscribe: {
            allow: ["com.bridge.>", "nav.bridge.>", "ops.cmd.>", "ops.status.>"]
          }
        }
      }
    ]
  }
  
  # Engine tenant account (ship systems)
  ENGINE: {
    jetstream: enabled
    users: [
      {
        user: "engine"
        password: "secret"
        permissions: {
          publish: {
            allow: ["ops.engine.>", "nav.engine.>", "com.engine.>"]
          }
          subscribe: {
            allow: ["ops.engine.>", "nav.engine.>", "com.engine.>"]
          }
        }
      }
    ]
  }
  
  # Provisioning account (for provisioning workflow)
  PROVISION: {
    users: [
      {
        user: "provisioner"
        password: "secret"
        permissions: {
          publish: {
            allow: ["ops.provision.>"]
          }
          subscribe: {
            allow: ["ops.provision.>"]
          }
        }
      }
    ]
  }
}

# Designate SYS as system account for  events
system_account: SYS

# =============================================================================
# JetStream
# =============================================================================
jetstream {
  store_dir: "./data/nats"
  max_memory_store: 1GB
  max_file_store: 10GB
}

# =============================================================================
# HTTPS Monitoring
# =============================================================================
https_port: 8444
tls {
    cert_file: "/home/caia/192.168.178.40+2.pem"
    key_file: "/home/caia/192.168.178.40+2-key.pem"
}

# =============================================================================
# WebSocket (WSS)
# =============================================================================
websocket {
    port: 8443
    tls {
        cert_file: "/home/caia/192.168.178.40+2.pem"
        key_file: "/home/caia/192.168.178.40+2-key.pem"
    }
}

# =============================================================================
# Clustering (disabled for single-node dev)
# =============================================================================
# cluster {
#   name: nunect-cluster
#   listen: localhost:4244
#   routes: [
#     nats://localhost:4244
#   ]
# }
